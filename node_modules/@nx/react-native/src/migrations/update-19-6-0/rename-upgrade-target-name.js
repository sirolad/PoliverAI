"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = update;
const devkit_1 = require("@nx/devkit");
/**
 * There was a typo in @nx/react-native/plugin, where "upgradeTargetName" was "upgradeTargetname"
 */
async function update(tree) {
    const nxJson = (0, devkit_1.readNxJson)(tree);
    if (!nxJson.plugins)
        return;
    let updated = false;
    for (const plugin of nxJson.plugins) {
        if (typeof plugin === 'string')
            continue;
        if (plugin.plugin !== '@nx/react-native/plugin')
            continue;
        if (plugin.options['upgradeTargetname']) {
            plugin.options['upgradeTargetName'] = plugin.options['upgradeTargetname'];
            delete plugin.options['upgradeTargetname'];
            updated = true;
        }
    }
    if (updated)
        (0, devkit_1.updateNxJson)(tree, nxJson);
    await (0, devkit_1.formatFiles)(tree);
}
