"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ensureDependencies = ensureDependencies;
const devkit_1 = require("@nx/devkit");
const versions_1 = require("@nx/jest/src/utils/versions");
const versions_2 = require("../../../utils/versions");
function ensureDependencies(tree, options) {
    const { jestVersion, typesNodeVersion } = (0, versions_1.versions)(tree);
    const devDependencies = {
        '@testing-library/jest-dom': versions_2.testingLibraryJestDom,
        '@types/node': typesNodeVersion,
        'jest-circus': jestVersion,
    };
    if (options.framework === 'expo') {
        devDependencies['@config-plugins/detox'] = versions_2.configPluginsDetoxVersion;
    }
    return (0, devkit_1.addDependenciesToPackageJson)(tree, {}, devDependencies);
}
