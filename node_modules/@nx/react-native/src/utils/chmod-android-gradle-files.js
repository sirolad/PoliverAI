"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.chmodAndroidGradlewFiles = chmodAndroidGradlewFiles;
exports.chmodAndroidGradlewFilesTask = chmodAndroidGradlewFilesTask;
const devkit_1 = require("@nx/devkit");
const fs_1 = require("fs");
const path_1 = require("path");
function chmodAndroidGradlewFiles(androidFolder) {
    if ((0, fs_1.existsSync)((0, path_1.join)(androidFolder, 'gradlew'))) {
        (0, fs_1.chmodSync)((0, path_1.join)(androidFolder, 'gradlew'), 0o775);
    }
    if ((0, fs_1.existsSync)((0, path_1.join)(androidFolder, 'gradlew.bat'))) {
        (0, fs_1.chmodSync)((0, path_1.join)(androidFolder, 'gradlew.bat'), 0o775);
    }
}
function chmodAndroidGradlewFilesTask(androidFolder) {
    return () => {
        devkit_1.logger.info(`chmod android gradlew files under ${androidFolder}`);
        try {
            chmodAndroidGradlewFiles(androidFolder);
        }
        catch {
            throw new Error(`chmod failed gradlew file under ${androidFolder}`);
        }
    };
}
